constructor {
  Create : (token_id: actor_id);
};

service Vault {
  AddMarket : (program_id: actor_id) -> null;
  ClaimFees : () -> null;
  /// Debug/testing helper to mint balance without requiring market/admin routing.
  /// Only available when compiled with the `debug` feature.
  DebugDeposit : (user: actor_id, amount: u128) -> null;
  SetQuarantinePeriod : (period: u64) -> null;
  TransferToMarket : (market_id: actor_id, amount: u128) -> null;
  UpdateFeeRate : (new_rate: u128) -> null;
  VaultDeposit : (user: actor_id, amount: u128) -> null;
  VaultForceExit : (user: actor_id, amount: u128) -> null;
  VaultWithdraw : (user: actor_id, amount: u128) -> null;
  query Admin : () -> actor_id;
  query GetBalance : (user: actor_id) -> u128;
  query GetTreasury : () -> u128;
  query IsAuthorized : (program_id: actor_id) -> bool;

  events {
    Deposit: struct {
      user: [u8, 20],
      token: [u8, 20],
      amount: u128,
      balance_after: u128,
    };
    Withdrawal: struct {
      user: [u8, 20],
      token: [u8, 20],
      amount: u128,
      status: str,
    };
    FeesClaimed: struct {
      token: [u8, 20],
      amount: u128,
    };
    QuarantineReleased: struct {
      user: [u8, 20],
      token: [u8, 20],
      amount: u128,
      balance_after: u128,
    };
  }
};
